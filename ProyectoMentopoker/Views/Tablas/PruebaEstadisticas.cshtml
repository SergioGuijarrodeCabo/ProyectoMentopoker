@model ConjuntoPartidasUsuario

<!doctype html>
<html lang="en">
<head>

    <!-- Bootstrap core CSS -->
    <link href="~/css/bootstrap.min.css" rel="stylesheet">




</head>
<body>


@*    <style>

        #rondas-table tbody tr,
        #jugadas-table tbody tr {
            display: table-row !important;
        }
        


    </style>*@



<h1>Prueba estadísticas</h1>


@if (Model != null)
{

    <h2>Partidas</h2>
    <table class="table table-info">
        <thead>
            <tr>
                <th>Partida_id</th>
                <th>Cash_Inicial</th>
                <th>Cash_Final</th>
                <th>Fecha</th>
                <th>Comentarios</th>
                <th>Usuario_id</th>
                <th>Rondas</th>
            </tr>

        </thead>
        <tbody>
            @for (var i=0; i <  Model.Partidas.Count; i+=1)  
            {  
                <tr>  
                    <td>@Html.DisplayFor(model =>model.Partidas[i].Partida_id)</td>
                    <td>@Html.DisplayFor(model => model.Partidas[i].Cash_Inicial)</td>
                    <td>@Html.DisplayFor(model => model.Partidas[i].Cash_Final)</td>
                    <td>@Html.DisplayFor(model =>model.Partidas[i].Fecha)</td>
                    <td>@Html.DisplayFor(model => model.Partidas[i].Comentarios)</td>
                    <td>@Html.DisplayFor(model => model.Partidas[i].Usuario_id)</td>
                    <td><button class="btn btn-primary my-2" onclick="verRondas(@Model.Partidas[i].Partida_id)" id="botonRondas">Ver rondas</button></td>
                </tr>  
            }  

        </tbody>

    </table>

    <h2>Rondas</h2>
    <table class="table table-info" id="rondas-table">
        <thead>
            <tr>
                <th>Ronda_id</th>
               <th>Cantidad_Jugada</th>
                <th>Ganancias</th>
                <th>Partida_id</th>
                <th>Jugadas</th>
             
            </tr>
        </thead>
            <tbody>
                @for (var i = 0; i < Model.Rondas.Count; i += 1)
                {
                    <tr data-partida-id="@Model.Rondas[i].Partida_id">
                        <td>@Html.DisplayFor(model =>model.Rondas[i].Ronda_id)</td>
                        <td>@Html.DisplayFor(model => model.Rondas[i].Cantidad_jugada)</td>
                        <td>@Html.DisplayFor(model => model.Rondas[i].Ganancias)</td>
                        <td>@Html.DisplayFor(model =>model.Rondas[i].Partida_id)</td>
                        <td>
                            <button class="btn btn-primary my-2" onclick="verJugadas(@Model.Rondas[i].Ronda_id)" id="botonJugadas">Ver jugadas</button>
                        </td>
                    </tr>
                }
            </tbody>

    </table>

    <h2>Jugadas</h2>
    <table class="table table-info" id="jugadas-table">
        <thead>
            <tr>
                <th>Jugada_id</th>
               <th>Cantidad_Jugada</th>
                <th>Seguimiento_Tabla</th>
                <th>Identificador</th>
                <th>Ronda_id</th>
         
            </tr>
        </thead>
            <tbody>
                @for (var i = 0; i < Model.Jugadas.Count; i += 1)
                {
                    <tr data-ronda-id="@Model.Jugadas[i].Ronda_id">
                        <td>@Html.DisplayFor(model =>model.Jugadas[i].Jugada_id)</td>
                        <td>@Html.DisplayFor(model => model.Jugadas[i].Cantidad_jugada)</td>
                        <td>@Html.DisplayFor(model => model.Jugadas[i].Seguimiento_Tabla)</td>
                        <td>@Html.DisplayFor(model =>model.Jugadas[i].Identificador)</td>
                        <td>@Html.DisplayFor(model => model.Jugadas[i].Ronda_id)</td>
                    </tr>
                }
            </tbody>
    </table>
}

      </body>
      
      @section scripts { 
    <script>

        function verRondas(partidaId) {
            // Hide all rows in the rondas table
            $('#rondas-table tbody tr').hide();

            // Show only the rows associated with the selected partida
            $('#rondas-table tbody tr[data-partida-id="' + partidaId + '"]').show();
        }

        function verJugadas(rondaId) {
            // Hide all rows in the jugadas table
            $('#jugadas-table tbody tr').hide();

            // Show only the rows associated with the selected ronda
            $('#jugadas-table tbody tr[data-ronda-id="' + rondaId + '"]').show();
        }

        $('#botonRondas').click(function() {
            // Get the partida_id from the button's data attribute
            var partidaId = $(this).data('partida-id');

            // Hide all rows in the rondas table
            $('#rondas-table tbody tr').hide();

            // Show only the rows associated with the selected partida
            $('#rondas-table tbody tr[data-partida-id="' + partidaId + '"]').show();

            // Hide all rows in the jugadas table
            $('#jugadas-table tbody tr').hide();
        });

        $('#botonJugadas').click(function() {
            // Get the ronda_id from the button's data attribute
            var rondaId = $(this).data('ronda-id');

            // Hide all rows in the jugadas table
            $('#jugadas-table tbody tr').hide();

            // Show only the rows associated with the selected ronda
            $('#jugadas-table tbody tr[data-ronda-id="' + rondaId + '"]').show();
        });





        
    </script>}